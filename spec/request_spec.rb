#!/user/bin/env ruby
#coding: utf-8

require "safecharge/request"

describe Safecharge::Request do

  before :all do
	  # see https://test.safecharge.com/doc/Test_CreditCards.txt
	  @valid_cards = [
			'4000021059386316',
			'4000024473425231',
			'4000037434826586',
			'4000046595404935',
			'4000050320287425',
			'4000065919262217',
			'4000097446238923',
			'4444419078717848',
			'4444426864550804',
			'4444436501403986',
			'4444458284615321',
			'4444465389525081',
			'4444470762656560',
			'4444480853526820',
			'4444499431371889',
			'4444498667002689',
			'4444498051157677',
			'4444495866098625',
			'4444412360952876',
			'4000024059825994',
			'5100260315810893',
			'5100270690090656',
			'5100286513996754',
			'5333305231532763',
			'5333314109355505',
			'5333326770941868',
			'5333333139584041',
			'5333332933601845',
			'5333332230811667',
			'5333331746326111',
			'5333344683545239',
			'5333347342022912',
			'5333351770315269',
			'5333368254969676',
			'5333377040264581',
			'5333385639118126',
			'5333390439512403',
			'5333335034327954',
			'5333339469130529',
			'5333337896594614',
			'5333336113126473',
			'5333334054117130',
			'5333337861359175',
			'4012001036275556',
			'4012001038443335',
			'4012001036298889',
			'4012001036983332',
			'4012001037167778',
			'4012001037490014',
			'4005559876540',
			'36000023818683',
			'36000097503567',
			'6331101999990016'
		]
  
  end

  it "should create a request" do
		settings = { 'username' => 'dummy', 'password' => 'dummy' }

		if settings['username'].empty? || settings['password'].empty?
			raise RuntimeError, "Both username and password to SafeCharge API are required to run this test"
		end

		req = Safecharge::Request.new(settings)
    req.should_not eq nil

  end

end
